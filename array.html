<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    var arr = ['语文','数学','英文','美术','体育'];
    // join()
    var arrStr = arr.join('|');//组合成|分隔的字符串；
    console.log(arrStr);
    console.log(arr);//原数组不变；
    console.log(typeof arrStr);//数据类型变为了字符串；
    // 分隔符
    var arrnocontent = new Array(5);
    var repeatarr = arrnocontent.join('abc');
    console.log(repeatarr);

    function repeat(str,n){
        var arrnocontent = new Array(n+1);
        return arrnocontent.join(str); 
    };
   console.log(repeat('mini',7));//利用join(),将分隔的字符当成要重复的字符串插入空数组，就可以实现重复数组；
    //    分隔符   
    // pop()&push(),push()接收任意数量的参数；
    var arrpush = arr.push('会计');//push（）执行完，返回修改后的数组长度，原数组被修改；
    console.log(arrpush);//返回新数组的长度；
    console.log(arr);//原数组被改变；
    var arrpop = arr.pop();//pop()执行完，返回最后一个抛出的数据，原数组被修改；
    console.log(arrpop);//返回‘会计’，
    console.log(arr);//原数组被修改；
    // 分隔符
    // shift()&unshift()
    var arrunshift = arr.unshift('德语');//unshift()执行完，在数组开头添加元素，返回修改后数组长度，原数组被修改；
    console.log(arrunshift);//修改后数组的长度；
    console.log(arr);//原数组被修改；首位是'德语'；
    var arrshift = arr.shift();//shift()执行完，返回抛出的最开始的一个数据，原数组被修改；
    console.log(arrshift);//抛出最前面一个元素；'德语'；
    console.log(arr);//原数组被修改；
    // 分隔符
    // sort()
    var arr2 = [1,3,45,8,63,24];
    var arrsort = arr2.sort();//sort()方法是对元素每一项调toString()方法，然后按照字符串比较；原数组被修改；
    console.log(arrsort);//按照字符串ASCII码比较的数组排序；
    console.log(arr2);//原数组被修改；
    // sort()函数可以穿参，传一个比较函数
    var arr2sort = arr2.sort(compare);//sort()传参是函数的名称即可；
    function compare (a1,a2){ //比较函数，如果第一个数小于第二个数则返回-1，如果第二个小于第一个则返回1，相等则返回0；原数组被修改；
        if(a1<a2){
            return -1;
        }else if(a1>a2) {
            return 1;
        } else {
            return 0;
        }
    }
    console.log(arr2sort);//按数字大小排序的数组；
    console.log(arr2);//数组被修改；
    // 分隔符
    // reverse()
    var arrreverse = arr2.reverse();//逆序排序数组，原数组被修改；
    console.log(arrreverse);//逆序排序的数组；
    console.log(arr2);//原数组被修改；
    console.log('-------------');
    // 分隔符
    // concat（），不改变原数组；
    var arrconcat = arr2.concat();
    console.log(arrconcat);//未传参时传创建一个arr2的副本；
    console.log(arr2);

    console.log('-------------');
    var arr2concat = arr2.concat(6,[34,52]);//传参，在创建的副本中添加传入的参数座位元素项，原数组未被改变；
    console.log(arr2concat);//新创建的数组中添加了元素；返回添加元素后的新数组；
    console.log(arr2);//原数组未被修改；

    console.log('-------------');
    var arrslice = arr2.slice(2,4);//slice是从数组中切下一片，形成一个新数组，原数组不变；
    console.log(arrslice);//切下的一片，数组中的一片；
    console.log(arr2);//原数组未被修改；
    console.log('-------------');
    var arrsplice = arr2.splice(0,2);//splice是在slice之上添加的函数，splice在除了切下一片的作用，还可以添加，替换等操作，返回被删除的项，如果没有删除则返回空数组，原来的数组被修改；

    console.log(arrsplice);//返回被删除的元素；
    console.log(arr2);//删除元素后的数组；

    var arr2splice = arr2.splice(3,0,66,88);//添加元素，没有删除，因此返回空数组，原数组被修改；
    console.log(arr2splice);//没有删除则返回为空数组；
    console.log(arr2);//新数组添加了元素；
    console.log('-------------');

    // indexOf()&lastIndexOf()//查找过程中使用的是全等来查找的；
    console.log(arr2);//此处arr2已经变化了，不再是原来的arr2了；
    var arr2indexOf = arr2.indexOf(88);
    console.log(arr2indexOf);
    console.log(arr2);
    
    var arrlastIndexOf = arr2.lastIndexOf(88);//返回的都是正序下的索引值；
    console.log(arrlastIndexOf);
    console.log('-------------');
    // foreach()传参是一个函数，函数中的参数为：遍历的每一项，索引值，传入的数组；
    var arrforeach = arr2.forEach((item,index,arr2)=>{
        console.log(item+'|'+index+'|'+arr2);
    })
    console.log(arrforeach);//forEach()没有返回值；
    console.log('-------------');
    // map()，传参是一个函数，函数的形参是数组遍历中的每一项，有返回值，返回函数操作过的返回组成的数组；
    var arrmap = arr2.map((item)=>{
        return item*item;  //数组的每一项进行处理，然后放在一个新数组中；
    })
    console.log(arrmap);
    console.log(arr2);//原数组不变；

    console.log('11-------------');

    // filter（）数组中的每一项运行给定函数，返回满足过滤条件组成的数组；
    var arrfilter = arr2.filter((item,index)=>{
        return item >5; // 函数体给出一个过滤条件；
    })
    console.log(arrfilter);//满足过滤条件的原数组的成员组成的新数组；
    console.log(arr2);//原数组没有变化；

    console.log('-------------');

    // every（）：每一项都满足条件则返回一个boolean值；
     var arreverybool = arr2.every((item)=>{
        return item >10;
     });
     console.log(arreverybool);//不是所有项满足条件，故返回false;
     console.log(arr2);//原数组不变；
    //  some():所有项中，有一项满足条件就返回true;
    var arrsome = arr2.some((item)=>{
        return item >20;
    })
    console.log(arrsome);//只要有一项满足则返回true；
    console.log(arr2);//原数组不变；

    // reduce()&reduceRight()
    var arrreduce = arr2.reduce(()=>{},10);//两个参数，一个函数，一个作为归并基础的初始值；

    var arr2reduce = arr2.reduce((pre,cur,index,arr)=>{
        console.log(pre+'|'+cur+'|'+index+'|'+arr)
        return cur;//返回的每一项都会自动作为下面迭代的首项pre传入；这个函数返回的任何值都会作为第一个参数自动传给下一项
    },5)
    console.log(arr2reduce);//从左边开始遍历；
    console.log(arr2);//原数组不变；
    console.log('-------------');
    var arr2reduceRight = arr2.reduceRight((pre,cur,index,arr)=>{
        console.log(pre+'|'+cur+'|'+index+'|'+arr)
        return cur;
    },15)
    console.log(arr2reduceRight);//从右边开始遍历；
    console.log(arr2);//原数组不变；
    console.log('-------------');

    //删除数组中的匹配项，不利用索引，不利用循环；
    console.log(arr2);
    arr2.push(3,3);
    console.log(arr2);
    var newfilterArr = arr2.filter((item)=>{
           return  item != 3;
    })
   console.log(newfilterArr);
    //删除数组中的元素的集中方法：
    //有问题的方法：因为索引变化了；导致没有完全删除匹配项；
    // (function(){
    //     var arr = [1,2,2,3,4,5];
    //     var len = arr.length;
    //     for(var i=0;i<len;i++){
    //         console.log(i+"="+arr[i]);
    //         if(arr[i]==2){
    //             arr.splice(i,1);
    //         }
    //     }
    //     console.log(arr);
    // })()

    //解决方法一：
    // (function(){
    //     var arr = [1,2,2,3,4,5];
    //     var len = arr.length;
    //     for(var i=0;i<len;i++){
    //         console.log(i+'='+arr[i]);
    //         if(arr[i]==2){
    //             arr.splice(i--,1);
    //         }
    //     }
    //     console.log(arr);
    // })()
    // 解决方法二：
    (function(){
        var arr = [1,2,2,3,4,5];
        var len = arr.length-1;
        for(var i=len;i>=0;i--){
            console.log(i+'='+arr[i]);
            if(arr[i]==2){
                arr.splice(i,1);
            }
        }
        console.log(arr);
    })()
    // 解决方法三：更高效的一个方法：因为将数组长度和循环结合起来了；
    // (function(){
    //     var arr = [1,2,2,3,4,5];
    //     var i = arr.length;
    //     while(i--){
    //         console.log(i+"="+arr[i]);
    //         if(arr[i]==2){
    //             arr.splice(i,1);
    //         }
    //     }
    //     console.log(arr);
    // })()


    

</script>
</html>